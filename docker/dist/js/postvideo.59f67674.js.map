{"version":3,"sources":["webpack:///./src/views/PostVideo.vue","webpack:///./src/api/upload/index.js","webpack:///./src/views/PostVideo.vue?76c0","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/PostVideo.vue?3539"],"names":["class","v_slot","ref","model","form","label-width","label","title","type","url","info","action","before-upload","fnBeforeUpload","http-request","fnUploadRequest","show-file-list","imageUrl","src","onSubmit","postUploadToken","fileName","axios","post","filename","then","res","data","name","dialogImageUrl","dialogVisible","avatar","methods","file","isImage","isLt2M","size","this","$message","error","option","oReq","XMLHttpRequest","open","put","send","onload","get","key","catch","$notify","message","status","msg","id","components","__exports__","render","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable"],"mappings":"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","file":"js/postvideo.59f67674.js","sourcesContent":["<template>\n  <div class=\"post-video\">\n    <h2>欢迎投稿：</h2>\n    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n      <el-form-item label=\"标题\">\n        <el-input v-model=\"form.title\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"视频地址\">\n        <el-input type=\"url\" v-model=\"form.url\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"描述\">\n        <el-input type=\"textarea\" v-model=\"form.info\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"视频封面\">\n        <el-upload\n          class=\"avatar-uploader\"\n          label=\"描述\"\n          action=\"\"\n          ref=\"upload\"\n          :before-upload=\"fnBeforeUpload\"\n          :http-request=\"fnUploadRequest\"\n          :show-file-list=\"false\">\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          <div class=\"el-upload__tip\" v_slot=\"tip\">只能上传png文件，且不超过500kb</div>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\n      </el-form-item>\n\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport * as API from '@/api/video/';\nimport uplpadAPI from '@/api/upload/';\n\nexport default {\n  name: 'PostVideo',\n  data() {\n    return {\n      imageUrl: '',\n      dialogImageUrl: '',\n      dialogVisible: false,\n      form: {\n        title: '',\n        info: '',\n        url: '',\n        avatar: '',\n      },\n    };\n  },\n  methods: {\n    fnBeforeUpload(file) {\n      const isImage = (file.type === 'image/png' || file.type === 'image/jpeg');\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isImage) {\n        this.$message.error('上传头像图片只能是图片!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isImage && isLt2M;\n    },\n    fnUploadRequest(option) {\n      uplpadAPI(option.file.name).then((res) => {\n        const oReq = new XMLHttpRequest();\n        oReq.open('PUT', res.data.put, true);\n        oReq.send(option.file);\n        oReq.onload = () => {\n          this.imageUrl = res.data.get;\n          this.form.avatar = res.data.key;\n        };\n      }).catch((error) => {\n        this.$notify.error({\n          title: '网路错误，或者服务器宕机',\n          message: error,\n        });\n      });\n    },\n    onSubmit() {\n      API.postVideo(this.form).then((res) => {\n        if (res.status > 0) {\n          this.$notify.error({\n            title: '投稿失败',\n            message: res.msg,\n          });\n        } else {\n          this.$notify({\n            title: '投稿成功',\n            message: `您投稿的ID为${res.data.id}`,\n            type: 'success',\n          });\n        }\n      }).catch((error) => {\n        this.$notify.error({\n          title: '网路错误，或者服务器宕机',\n          message: error,\n        });\n      });\n    },\n  },\n  components: {\n  },\n};\n</script>\n\n<style>\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    max-width: 178px;\n    max-height: 178px;\n    display: block;\n  }\n</style>\n","import axios from 'axios';\n\n// 读视频详情\nconst postUploadToken = fileName => axios.post('/api/v1/upload/token', { filename: fileName }).then(res => res.data);\n\nexport default postUploadToken;\n","import { render } from \"./PostVideo.vue?vue&type=template&id=13b83258\"\nimport script from \"./PostVideo.vue?vue&type=script&lang=js\"\nexport * from \"./PostVideo.vue?vue&type=script&lang=js\"\n\nimport \"./PostVideo.vue?vue&type=style&index=0&id=13b83258&lang=css\"\n\nimport exportComponent from \"/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PostVideo.vue?vue&type=style&index=0&id=13b83258&lang=css\""],"sourceRoot":""}