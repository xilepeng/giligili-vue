(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["postvideo"],{"43fd":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),a={class:"post-video"},r=Object(o["n"])("h2",null,"欢迎投稿：",-1),l=["src"],u={key:1,class:"el-icon-plus avatar-uploader-icon"},c=Object(o["n"])("div",{class:"el-upload__tip",v_slot:"tip"},"只能上传png文件，且不超过500kb",-1),i=Object(o["p"])("立即创建");function f(e,t,n,f,b,s){var d=Object(o["Q"])("el-input"),m=Object(o["Q"])("el-form-item"),p=Object(o["Q"])("el-upload"),j=Object(o["Q"])("el-button"),O=Object(o["Q"])("el-form");return Object(o["H"])(),Object(o["m"])("div",a,[r,Object(o["q"])(O,{ref:"form",model:b.form,"label-width":"80px"},{default:Object(o["fb"])((function(){return[Object(o["q"])(m,{label:"标题"},{default:Object(o["fb"])((function(){return[Object(o["q"])(d,{modelValue:b.form.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b.form.title=e})},null,8,["modelValue"])]})),_:1}),Object(o["q"])(m,{label:"视频地址"},{default:Object(o["fb"])((function(){return[Object(o["q"])(d,{type:"url",modelValue:b.form.url,"onUpdate:modelValue":t[1]||(t[1]=function(e){return b.form.url=e})},null,8,["modelValue"])]})),_:1}),Object(o["q"])(m,{label:"描述"},{default:Object(o["fb"])((function(){return[Object(o["q"])(d,{type:"textarea",modelValue:b.form.info,"onUpdate:modelValue":t[2]||(t[2]=function(e){return b.form.info=e})},null,8,["modelValue"])]})),_:1}),Object(o["q"])(m,{label:"视频封面"},{default:Object(o["fb"])((function(){return[Object(o["q"])(p,{class:"avatar-uploader",label:"描述",action:"",ref:"upload","before-upload":s.fnBeforeUpload,"http-request":s.fnUploadRequest,"show-file-list":!1},{default:Object(o["fb"])((function(){return[b.imageUrl?(Object(o["H"])(),Object(o["m"])("img",{key:0,src:b.imageUrl,class:"avatar"},null,8,l)):(Object(o["H"])(),Object(o["m"])("i",u)),c]})),_:1},8,["before-upload","http-request"])]})),_:1}),Object(o["q"])(m,null,{default:Object(o["fb"])((function(){return[Object(o["q"])(j,{type:"primary",onClick:s.onSubmit},{default:Object(o["fb"])((function(){return[i]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])])}n("b0c0");var b=n("76e5"),s=n("bc3a"),d=n.n(s),m=function(e){return d.a.post("/api/v1/upload/token",{filename:e}).then((function(e){return e.data}))},p=m,j={name:"PostVideo",data:function(){return{imageUrl:"",dialogImageUrl:"",dialogVisible:!1,form:{title:"",info:"",url:"",avatar:""}}},methods:{fnBeforeUpload:function(e){var t="image/png"===e.type||"image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是图片!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},fnUploadRequest:function(e){var t=this;p(e.file.name).then((function(n){var o=new XMLHttpRequest;o.open("PUT",n.data.put,!0),o.send(e.file),o.onload=function(){t.imageUrl=n.data.get,t.form.avatar=n.data.key}})).catch((function(e){t.$notify.error({title:"网路错误，或者服务器宕机",message:e})}))},onSubmit:function(){var e=this;b["c"](this.form).then((function(t){t.status>0?e.$notify.error({title:"投稿失败",message:t.msg}):e.$notify({title:"投稿成功",message:"您投稿的ID为".concat(t.data.id),type:"success"})})).catch((function(t){e.$notify.error({title:"网路错误，或者服务器宕机",message:t})}))}},components:{}},O=(n("b53a"),n("6b0d")),g=n.n(O);const h=g()(j,[["render",f]]);t["default"]=h},4462:function(e,t,n){},b0c0:function(e,t,n){var o=n("83ab"),a=n("5e77").EXISTS,r=n("e330"),l=n("9bf2").f,u=Function.prototype,c=r(u.toString),i=/^\s*function ([^ (]*)/,f=r(i.exec),b="name";o&&!a&&l(u,b,{configurable:!0,get:function(){try{return f(i,c(this))[1]}catch(e){return""}}})},b53a:function(e,t,n){"use strict";n("4462")}}]);
//# sourceMappingURL=postvideo.59f67674.js.map