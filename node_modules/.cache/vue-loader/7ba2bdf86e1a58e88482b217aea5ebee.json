{"remainingRequest":"/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/x/GolandProjects/giligili-vue/src/views/PostVideo.vue?vue&type=style&index=0&id=56a96171&lang=css","dependencies":[{"path":"/Users/x/GolandProjects/giligili-vue/src/views/PostVideo.vue","mtime":1636536315123},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/css-loader/dist/cjs.js","mtime":1636518053256},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1636518055253},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/postcss-loader/src/index.js","mtime":1636518053862},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/cache-loader/dist/cjs.js","mtime":1636518052017},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/index.js","mtime":1636518053861}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkIHsKICAgIGJvcmRlcjogMXB4IGRhc2hlZCAjZDlkOWQ5OwogICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICB9CiAgLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkOmhvdmVyIHsKICAgIGJvcmRlci1jb2xvcjogIzQwOUVGRjsKICB9CiAgLmF2YXRhci11cGxvYWRlci1pY29uIHsKICAgIGZvbnQtc2l6ZTogMjhweDsKICAgIGNvbG9yOiAjOGM5MzlkOwogICAgd2lkdGg6IDE3OHB4OwogICAgaGVpZ2h0OiAxNzhweDsKICAgIGxpbmUtaGVpZ2h0OiAxNzhweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICB9CiAgLmF2YXRhciB7CiAgICBtYXgtd2lkdGg6IDE3OHB4OwogICAgbWF4LWhlaWdodDogMTc4cHg7CiAgICBkaXNwbGF5OiBibG9jazsKICB9Cg=="},{"version":3,"sources":["/Users/x/GolandProjects/giligili-vue/src/views/PostVideo.vue"],"names":[],"mappings":";EAkHE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACd,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACpB;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAChB","file":"/Users/x/GolandProjects/giligili-vue/src/views/PostVideo.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"post-video\">\n    <h2>欢迎投稿：</h2>\n    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n      <el-form-item label=\"标题\">\n        <el-input v-model=\"form.title\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"视频地址\">\n        <el-input type=\"url\" v-model=\"form.url\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"描述\">\n        <el-input type=\"textarea\" v-model=\"form.info\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"视频封面\">\n        <el-upload\n          class=\"avatar-uploader\"\n          label=\"描述\"\n          action=\"\"\n          ref=\"upload\"\n          :before-upload=\"fnBeforeUpload\"\n          :http-request=\"fnUploadRequest\"\n          :show-file-list=\"false\">\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          <div class=\"el-upload__tip\" v_slot=\"tip\">只能上传png文件，且不超过500kb</div>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\n      </el-form-item>\n\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport * as API from '@/api/video/';\nimport uplpadAPI from '@/api/upload/';\n\nexport default {\n  name: 'PostVideo',\n  data() {\n    return {\n      imageUrl: '',\n      dialogImageUrl: '',\n      dialogVisible: false,\n      form: {\n        title: '',\n        info: '',\n        url: '',\n        avatar: '',\n      },\n    };\n  },\n  methods: {\n    fnBeforeUpload(file) {\n      const isImage = (file.type === 'image/png' || file.type === 'image/jpeg');\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isImage) {\n        this.$message.error('上传头像图片只能是图片!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isImage && isLt2M;\n    },\n    fnUploadRequest(option) {\n      uplpadAPI(option.file.name).then((res) => {\n        const oReq = new XMLHttpRequest();\n        oReq.open('PUT', res.data.put, true);\n        oReq.send(option.file);\n        oReq.onload = () => {\n          this.imageUrl = res.data.get;\n          this.form.avatar = res.data.key;\n        };\n      }).catch((error) => {\n        this.$notify.error({\n          title: '网路错误，或者服务器宕机',\n          message: error,\n        });\n      });\n    },\n    onSubmit() {\n      API.postVideo(this.form).then((res) => {\n        if (res.status > 0) {\n          this.$notify.error({\n            title: '投稿失败',\n            message: res.msg,\n          });\n        } else {\n          this.$notify({\n            title: '投稿成功',\n            message: `您投稿的ID为${res.data.id}`,\n            type: 'success',\n          });\n        }\n      }).catch((error) => {\n        this.$notify.error({\n          title: '网路错误，或者服务器宕机',\n          message: error,\n        });\n      });\n    },\n  },\n  components: {\n  },\n};\n</script>\n\n<style>\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    max-width: 178px;\n    max-height: 178px;\n    display: block;\n  }\n</style>\n"]}]}