{"remainingRequest":"/Users/x/GolandProjects/giligili-vue/node_modules/babel-loader/lib/index.js!/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/x/GolandProjects/giligili-vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/x/GolandProjects/giligili-vue/src/views/PostVideo.vue?vue&type=template&id=56a96171","dependencies":[{"path":"/Users/x/GolandProjects/giligili-vue/src/views/PostVideo.vue","mtime":1636535131399},{"path":"/Users/x/GolandProjects/giligili-vue/babel.config.js","mtime":1636518206713},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/cache-loader/dist/cjs.js","mtime":1636518052017},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/babel-loader/lib/index.js","mtime":1636518053895},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1636518055301},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/cache-loader/dist/cjs.js","mtime":1636518052017},{"path":"/Users/x/GolandProjects/giligili-vue/node_modules/vue-loader-v16/dist/index.js","mtime":1636518053861}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUgfSBmcm9tICJ2dWUiOwp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogInBvc3QtdmlkZW8iCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJoMiIsIG51bGwsICLmrKLov47mipXnqL/vvJoiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfMyA9IFsic3JjIl07CnZhciBfaG9pc3RlZF80ID0gewogIGtleTogMSwKICBjbGFzczogImVsLWljb24tcGx1cyBhdmF0YXItdXBsb2FkZXItaWNvbiIKfTsKCnZhciBfaG9pc3RlZF81ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICBjbGFzczogImVsLXVwbG9hZF9fdGlwIgp9LCBbLyojX19QVVJFX18qL19jcmVhdGVUZXh0Vk5vZGUoIuWPquiDveS4iuS8oHBuZ+aWh+S7tu+8jOS4lOS4jei2hei/hzUwMGtiIildLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCLnq4vljbPliJvlu7oiKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfZWxfaW5wdXQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtaW5wdXQiKTsKCiAgdmFyIF9jb21wb25lbnRfZWxfZm9ybV9pdGVtID0gX3Jlc29sdmVDb21wb25lbnQoImVsLWZvcm0taXRlbSIpOwoKICB2YXIgX2NvbXBvbmVudF9lbF91cGxvYWQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtdXBsb2FkIik7CgogIHZhciBfY29tcG9uZW50X2VsX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1idXR0b24iKTsKCiAgdmFyIF9jb21wb25lbnRfZWxfZm9ybSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1mb3JtIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfaG9pc3RlZF8yLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtLCB7CiAgICByZWY6ICJmb3JtIiwKICAgIG1vZGVsOiAkZGF0YS5mb3JtLAogICAgImxhYmVsLXdpZHRoIjogIjgwcHgiCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Zvcm1faXRlbSwgewogICAgICAgIGxhYmVsOiAi5qCH6aKYIgogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9pbnB1dCwgewogICAgICAgICAgICBtb2RlbFZhbHVlOiAkZGF0YS5mb3JtLnRpdGxlLAogICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiAkZGF0YS5mb3JtLnRpdGxlID0gJGV2ZW50OwogICAgICAgICAgICB9KQogICAgICAgICAgfSwgbnVsbCwgOAogICAgICAgICAgLyogUFJPUFMgKi8KICAgICAgICAgICwgWyJtb2RlbFZhbHVlIl0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgICAgLyogU1RBQkxFICovCgogICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybV9pdGVtLCB7CiAgICAgICAgbGFiZWw6ICLop4bpopHlnLDlnYAiCiAgICAgIH0sIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgICAgIHR5cGU6ICJ1cmwiLAogICAgICAgICAgICBtb2RlbFZhbHVlOiAkZGF0YS5mb3JtLnVybCwKICAgICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gJGRhdGEuZm9ybS51cmwgPSAkZXZlbnQ7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBudWxsLCA4CiAgICAgICAgICAvKiBQUk9QUyAqLwogICAgICAgICAgLCBbIm1vZGVsVmFsdWUiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICBsYWJlbDogIuaPj+i/sCIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICAgICAgdHlwZTogInRleHRhcmVhIiwKICAgICAgICAgICAgbW9kZWxWYWx1ZTogJGRhdGEuZm9ybS5pbmZvLAogICAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiAkZGF0YS5mb3JtLmluZm8gPSAkZXZlbnQ7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBudWxsLCA4CiAgICAgICAgICAvKiBQUk9QUyAqLwogICAgICAgICAgLCBbIm1vZGVsVmFsdWUiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9mb3JtX2l0ZW0sIHsKICAgICAgICBsYWJlbDogIuinhumikeWwgemdoiIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdXBsb2FkLCB7CiAgICAgICAgICAgIGNsYXNzOiAiYXZhdGFyLXVwbG9hZGVyIiwKICAgICAgICAgICAgbGFiZWw6ICLmj4/ov7AiLAogICAgICAgICAgICBhY3Rpb246ICIiLAogICAgICAgICAgICByZWY6ICJ1cGxvYWQiLAogICAgICAgICAgICAiYmVmb3JlLXVwbG9hZCI6ICRvcHRpb25zLmZuQmVmb3JlVXBsb2FkLAogICAgICAgICAgICAiaHR0cC1yZXF1ZXN0IjogJG9wdGlvbnMuZm5VcGxvYWRSZXF1ZXN0LAogICAgICAgICAgICAic2hvdy1maWxlLWxpc3QiOiBmYWxzZQogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFskZGF0YS5pbWFnZVVybCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImltZyIsIHsKICAgICAgICAgICAgICAgIGtleTogMCwKICAgICAgICAgICAgICAgIHNyYzogJGRhdGEuaW1hZ2VVcmwsCiAgICAgICAgICAgICAgICBjbGFzczogImF2YXRhciIKICAgICAgICAgICAgICB9LCBudWxsLCA4CiAgICAgICAgICAgICAgLyogUFJPUFMgKi8KICAgICAgICAgICAgICAsIF9ob2lzdGVkXzMpKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImkiLCBfaG9pc3RlZF80KSksIF9ob2lzdGVkXzVdOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgICAvKiBTVEFCTEUgKi8KCiAgICAgICAgICB9LCA4CiAgICAgICAgICAvKiBQUk9QUyAqLwogICAgICAgICAgLCBbImJlZm9yZS11cGxvYWQiLCAiaHR0cC1yZXF1ZXN0Il0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgICAgLyogU1RBQkxFICovCgogICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZm9ybV9pdGVtLCBudWxsLCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICAgICAgdHlwZTogInByaW1hcnkiLAogICAgICAgICAgICBvbkNsaWNrOiAkb3B0aW9ucy5vblN1Ym1pdAogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtfaG9pc3RlZF82XTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgLyogU1RBQkxFICovCgogICAgICAgICAgfSwgOAogICAgICAgICAgLyogUFJPUFMgKi8KICAgICAgICAgICwgWyJvbkNsaWNrIl0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgICAgLyogU1RBQkxFICovCgogICAgICB9KV07CiAgICB9KSwKICAgIF86IDEKICAgIC8qIFNUQUJMRSAqLwoKICB9LCA4CiAgLyogUFJPUFMgKi8KICAsIFsibW9kZWwiXSldKTsKfQ=="},{"version":3,"sources":["/Users/x/GolandProjects/giligili-vue/src/views/PostVideo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"post-video\">\n    <h2>欢迎投稿：</h2>\n    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n      <el-form-item label=\"标题\">\n        <el-input v-model=\"form.title\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"视频地址\">\n        <el-input type=\"url\" v-model=\"form.url\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"描述\">\n        <el-input type=\"textarea\" v-model=\"form.info\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"视频封面\">\n        <el-upload\n          class=\"avatar-uploader\"\n          label=\"描述\"\n          action=\"\"\n          ref=\"upload\"\n          :before-upload=\"fnBeforeUpload\"\n          :http-request=\"fnUploadRequest\"\n          :show-file-list=\"false\">\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          <div class=\"el-upload__tip\" v-slot=\"tip\">只能上传png文件，且不超过500kb</div>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\n      </el-form-item>\n\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport * as API from '@/api/video/';\nimport uplpadAPI from '@/api/upload/';\n\nexport default {\n  name: 'PostVideo',\n  data() {\n    return {\n      imageUrl: '',\n      dialogImageUrl: '',\n      dialogVisible: false,\n      form: {\n        title: '',\n        info: '',\n        url: '',\n        avatar: '',\n      },\n    };\n  },\n  methods: {\n    fnBeforeUpload(file) {\n      const isImage = (file.type === 'image/png' || file.type === 'image/jpeg');\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isImage) {\n        this.$message.error('上传头像图片只能是图片!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isImage && isLt2M;\n    },\n    fnUploadRequest(option) {\n      uplpadAPI(option.file.name).then((res) => {\n        const oReq = new XMLHttpRequest();\n        oReq.open('PUT', res.data.put, true);\n        oReq.send(option.file);\n        oReq.onload = () => {\n          this.imageUrl = res.data.get;\n          this.form.avatar = res.data.key;\n        };\n      }).catch((error) => {\n        this.$notify.error({\n          title: '网路错误，或者服务器宕机',\n          message: error,\n        });\n      });\n    },\n    onSubmit() {\n      API.postVideo(this.form).then((res) => {\n        if (res.status > 0) {\n          this.$notify.error({\n            title: '投稿失败',\n            message: res.msg,\n          });\n        } else {\n          this.$notify({\n            title: '投稿成功',\n            message: `您投稿的ID为${res.data.id}`,\n            type: 'success',\n          });\n        }\n      }).catch((error) => {\n        this.$notify.error({\n          title: '网路错误，或者服务器宕机',\n          message: error,\n        });\n      });\n    },\n  },\n  components: {\n  },\n};\n</script>\n\n<style>\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    max-width: 178px;\n    max-height: 178px;\n    display: block;\n  }\n</style>\n"],"sourceRoot":""}]}